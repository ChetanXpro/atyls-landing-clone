"use client";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
// import { getAuthSession } from "@/lib/auth";

import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";

import Link from "next/link";
import SignOutButton from "../auth/SignOutButton";
import { redirect } from "next/navigation";
import Image from "next/image";
import { useEffect, useState } from "react";
import { isHeroScrolled } from "@/atom/basic";
import { useAtom } from "jotai";

export default function Navbar() {
  // const session = await getAuthSession();
  const [isScrolled] = useAtom(isHeroScrolled);
  return (
    <div className="sticky top-0 z-[2000] flex flex-col bg-primarybg md:sticky md:top-0 md:h-20">
      <nav className="container-fluid font-heading font-medium">
        <div className="px-4 py-2 sm:px-6 md:mx-12 lg:px-8 2xl:mx-32">
          <div className="flex h-10 w-full items-center justify-between gap-4 md:h-16">
            <div className="relative flex w-full items-center justify-between">
              <div className="flex flex-1 flex-row items-center gap-4">
                <a className="flex w-fit items-center" href="/en-IN">
                  <div className="flex flex-row items-center gap-2 text-white">
                    <svg
                      fill="none"
                      height="50"
                      viewBox="0 0 103 30"
                      width="120"
                      xmlns="http://www.w3.org/2000/svg"
                      className="h-10"
                    >
                      <g clip-path="url(#clip0_5059_112)">
                        <path
                          d="M56.3146 10.0911L60.2314 6.19462H61.9684C62.2427 6.19462 62.519 6.13412 62.7767 6.01475L62.9457 5.92605C63.1727 5.8214 63.3133 5.60244 63.3133 5.35404C63.3133 5.10563 63.1727 4.88667 62.9555 4.78664L62.7675 4.68871C62.519 4.57397 62.2431 4.51345 61.9685 4.51345H60.2315L56.3155 0.6182C56.116 0.419829 55.8511 0.310547 55.5689 0.310547H55.0737C54.9963 0.310547 54.9254 0.352569 54.8886 0.419829C54.8514 0.487069 54.8539 0.569459 54.8962 0.634178L57.4478 4.59499C56.8086 4.63408 56.2749 4.68703 55.6255 4.75175L54.96 4.81858L53.9827 3.34714C53.943 3.28788 53.8771 3.25258 53.8061 3.25258H53.3836C53.3198 3.25258 53.2589 3.28158 53.2188 3.33117C53.1782 3.38119 53.163 3.44632 53.1769 3.5081L53.5898 5.35404L53.1769 7.19995C53.1736 7.21508 53.1719 7.23022 53.1719 7.24531C53.1719 7.29284 53.1879 7.33903 53.2184 7.37687C53.2589 7.42647 53.3198 7.45545 53.3836 7.45545H53.8061C53.8771 7.45545 53.9434 7.42015 53.9823 7.3609L54.9583 5.88946L55.6259 5.95628C56.2745 6.02102 56.8077 6.07395 57.447 6.11304L54.8962 10.0738C54.854 10.139 54.8519 10.221 54.8886 10.2878C54.9254 10.3555 54.9964 10.3975 55.0737 10.3975H55.5689C55.8511 10.3975 56.116 10.2887 56.3146 10.0911Z"
                          fill="currentcolor"
                        ></path>
                        <path
                          d="M4.68488 23.3187C6.42737 23.3187 7.83795 22.5527 8.66771 21.4747H8.75069L8.97195 23.0067H12.0421C11.9038 22.1556 11.8484 20.9357 11.8484 19.6874V14.6944C11.8484 11.6872 10.6038 8.87861 6.28908 8.87861C4.15937 8.87861 2.41688 9.47437 1.42117 10.0985L2.08498 12.3681C2.99771 11.7723 4.38064 11.3468 5.70825 11.3468C8.08688 11.3468 8.44644 12.8503 8.44644 13.7582V13.9851C3.46791 13.9568 0.453125 15.7157 0.453125 19.2051C0.453125 21.3045 1.97434 23.3187 4.68488 23.3187ZM5.76356 20.8222C4.68488 20.8222 3.82747 20.1981 3.82747 18.8363C3.82747 16.737 6.12313 16.198 8.52942 16.2547V18.1555C8.52942 18.3824 8.50176 18.6661 8.41878 18.9214C8.11454 19.9144 7.11883 20.8222 5.76356 20.8222ZM19.8418 23.2903C20.9204 23.2903 21.8055 23.1485 22.3034 22.9499L22.2481 20.2832C21.9438 20.3683 21.5013 20.4534 20.9204 20.4534C19.6205 20.4534 19.178 19.5739 19.178 17.9001V11.8007H22.414V9.19067H19.178V5.2473L15.8589 6.07002V9.19067H13.9228V11.8007H15.8589V18.2973C15.8589 20.113 16.1908 21.3612 16.91 22.1556C17.5461 22.8648 18.5971 23.2903 19.8418 23.2903ZM28.4159 23.0067V2.86426H24.9862V23.0067H28.4159ZM32.3158 29.2763C33.1732 29.1628 34.5561 28.7089 35.8837 27.489C37.4879 26.0706 38.7325 23.7726 40.5857 18.6094L43.96 9.19067H40.3091L38.207 16.5668C37.9581 17.4746 37.7092 18.4959 37.4879 19.2902H37.4049C37.2113 18.4959 36.9347 17.4462 36.6581 16.5951L34.2242 9.19067H30.4903L35.4135 21.8719C35.5795 22.2123 35.6071 22.4109 35.6071 22.5527C35.6071 22.723 35.5241 22.9215 35.3859 23.1769C34.9157 24.1131 34.1689 24.9358 33.5327 25.3613C32.8413 25.872 32.1221 26.184 31.5413 26.3259L32.3158 29.2763ZM48.8556 23.2903C52.4235 23.2903 54.332 21.4747 54.332 18.9782C54.3043 16.9356 53.1703 15.6589 50.7363 14.7511C49.0215 14.127 48.3854 13.7014 48.3854 12.822C48.3854 11.9709 49.0492 11.3751 50.2661 11.3751C51.4555 11.3751 52.5342 11.829 53.115 12.1695L53.7788 9.70132C53.0043 9.27578 51.7044 8.87861 50.2108 8.87861C47.0854 8.87861 45.1217 10.7794 45.1217 13.2191C45.094 14.8362 46.2003 16.3114 48.8279 17.2476C50.4874 17.8434 51.0406 18.3257 51.0406 19.2619C51.0406 20.1697 50.3768 20.7938 48.8832 20.7938C47.6662 20.7938 46.2003 20.2832 45.4259 19.8009L44.7621 22.3258C45.7578 22.8932 47.2237 23.2903 48.8556 23.2903Z"
                          fill="currentcolor"
                        ></path>
                        <path
                          d="M52.5049 6.29191V4.71582L29.7634 4.71582V6.29191L52.5049 6.29191Z"
                          fill="white"
                        ></path>
                      </g>
                      <g>
                        <path
                          d="M62.8666 8.79237L64.2386 13.2859H64.2896L65.6616 8.79237H67.3212L65.2512 14.9275H63.277L61.207 8.79237H62.8666Z"
                          fill="white"
                        ></path>
                        <path
                          d="M69.6333 8.79237V14.9275H68.1504V8.79237H69.6333Z"
                          fill="white"
                        ></path>
                        <path
                          d="M74.0491 10.6317C74.0292 10.412 73.9403 10.2413 73.7825 10.1195C73.6267 9.99563 73.4041 9.93372 73.1145 9.93372C72.9228 9.93372 72.763 9.95869 72.6352 10.0086C72.5074 10.0585 72.4115 10.1274 72.3476 10.2153C72.2837 10.3012 72.2507 10.4 72.2487 10.5119C72.2447 10.6038 72.2627 10.6846 72.3027 10.7545C72.3446 10.8244 72.4045 10.8863 72.4824 10.9403C72.5623 10.9922 72.6581 11.0381 72.77 11.0781C72.8818 11.118 73.0076 11.153 73.1474 11.1829L73.6747 11.3027C73.9782 11.3686 74.2458 11.4565 74.4775 11.5664C74.7112 11.6762 74.9069 11.807 75.0647 11.9588C75.2244 12.1106 75.3453 12.2853 75.4271 12.483C75.509 12.6808 75.551 12.9024 75.553 13.1481C75.551 13.5355 75.4531 13.868 75.2594 14.1456C75.0657 14.4232 74.7871 14.6359 74.4236 14.7837C74.0621 14.9315 73.6257 15.0054 73.1145 15.0054C72.6012 15.0054 72.1539 14.9285 71.7724 14.7747C71.391 14.6209 71.0944 14.3873 70.8827 14.0737C70.671 13.7602 70.5622 13.3638 70.5562 12.8845H71.9761C71.9881 13.0822 72.041 13.2469 72.1349 13.3787C72.2288 13.5106 72.3576 13.6104 72.5213 13.6783C72.6871 13.7462 72.8788 13.7802 73.0965 13.7802C73.2962 13.7802 73.466 13.7532 73.6058 13.6993C73.7476 13.6454 73.8564 13.5705 73.9323 13.4746C74.0082 13.3787 74.0471 13.2689 74.0491 13.1451C74.0471 13.0292 74.0112 12.9304 73.9413 12.8485C73.8714 12.7646 73.7635 12.6927 73.6178 12.6328C73.474 12.5709 73.2902 12.514 73.0665 12.4621L72.4255 12.3123C71.8942 12.1905 71.4758 11.9937 71.1703 11.7221C70.8647 11.4485 70.713 11.0791 70.7149 10.6137C70.713 10.2343 70.8148 9.90177 71.0205 9.61618C71.2262 9.3306 71.5108 9.10792 71.8743 8.94815C72.2377 8.78838 72.6521 8.7085 73.1175 8.7085C73.5928 8.7085 74.0052 8.78938 74.3547 8.95114C74.7062 9.11091 74.9788 9.33559 75.1725 9.62517C75.3662 9.91475 75.4651 10.2503 75.4691 10.6317H74.0491Z"
                          fill="white"
                        ></path>
                        <path
                          d="M77.6082 14.9275H76.0145L78.0845 8.79237H80.0586L82.1287 14.9275H80.535L79.094 10.3381H79.0461L77.6082 14.9275ZM77.3955 12.513H80.7267V13.6394H77.3955V12.513Z"
                          fill="white"
                        ></path>
                        <path
                          d="M86.0846 10.6317C86.0647 10.412 85.9758 10.2413 85.818 10.1195C85.6622 9.99563 85.4396 9.93372 85.15 9.93372C84.9583 9.93372 84.7985 9.95869 84.6707 10.0086C84.5429 10.0585 84.447 10.1274 84.3831 10.2153C84.3192 10.3012 84.2862 10.4 84.2842 10.5119C84.2802 10.6038 84.2982 10.6846 84.3382 10.7545C84.3801 10.8244 84.44 10.8863 84.5179 10.9403C84.5978 10.9922 84.6936 11.0381 84.8055 11.0781C84.9173 11.118 85.0431 11.153 85.1829 11.1829L85.7102 11.3027C86.0137 11.3686 86.2814 11.4565 86.513 11.5664C86.7467 11.6762 86.9424 11.807 87.1002 11.9588C87.2599 12.1106 87.3808 12.2853 87.4626 12.483C87.5445 12.6808 87.5865 12.9024 87.5885 13.1481C87.5865 13.5355 87.4886 13.868 87.2949 14.1456C87.1012 14.4232 86.8226 14.6359 86.4591 14.7837C86.0976 14.9315 85.6612 15.0054 85.15 15.0054C84.6367 15.0054 84.1894 14.9285 83.8079 14.7747C83.4265 14.6209 83.1299 14.3873 82.9182 14.0737C82.7065 13.7602 82.5977 13.3638 82.5917 12.8845H84.0116C84.0236 13.0822 84.0765 13.2469 84.1704 13.3787C84.2643 13.5106 84.3931 13.6104 84.5568 13.6783C84.7226 13.7462 84.9143 13.7802 85.132 13.7802C85.3317 13.7802 85.5015 13.7532 85.6413 13.6993C85.7831 13.6454 85.8919 13.5705 85.9678 13.4746C86.0437 13.3787 86.0826 13.2689 86.0846 13.1451C86.0826 13.0292 86.0467 12.9304 85.9768 12.8485C85.9069 12.7646 85.7991 12.6927 85.6533 12.6328C85.5095 12.5709 85.3257 12.514 85.1021 12.4621L84.461 12.3123C83.9298 12.1905 83.5114 11.9937 83.2058 11.7221C82.9002 11.4485 82.7485 11.0791 82.7505 10.6137C82.7485 10.2343 82.8503 9.90177 83.056 9.61618C83.2617 9.3306 83.5463 9.10792 83.9098 8.94815C84.2733 8.78838 84.6877 8.7085 85.153 8.7085C85.6283 8.7085 86.0407 8.78938 86.3902 8.95114C86.7417 9.11091 87.0143 9.33559 87.208 9.62517C87.4017 9.91475 87.5006 10.2503 87.5046 10.6317H86.0846Z"
                          fill="white"
                        ></path>
                        <path
                          d="M96.2778 11.8599C96.2778 12.535 96.148 13.1071 95.8884 13.5765C95.6288 14.0458 95.2773 14.4023 94.8339 14.6459C94.3925 14.8896 93.8973 15.0114 93.3481 15.0114C92.7968 15.0114 92.3006 14.8886 91.8592 14.6429C91.4178 14.3973 91.0674 14.0408 90.8077 13.5735C90.5501 13.1041 90.4213 12.533 90.4213 11.8599C90.4213 11.1849 90.5501 10.6127 90.8077 10.1434C91.0674 9.6741 91.4178 9.31762 91.8592 9.07397C92.3006 8.83032 92.7968 8.7085 93.3481 8.7085C93.8973 8.7085 94.3925 8.83032 94.8339 9.07397C95.2773 9.31762 95.6288 9.6741 95.8884 10.1434C96.148 10.6127 96.2778 11.1849 96.2778 11.8599ZM94.762 11.8599C94.762 11.4605 94.7051 11.123 94.5913 10.8474C94.4794 10.5718 94.3176 10.3631 94.106 10.2213C93.8963 10.0795 93.6436 10.0086 93.3481 10.0086C93.0545 10.0086 92.8018 10.0795 92.5901 10.2213C92.3785 10.3631 92.2157 10.5718 92.1019 10.8474C91.99 11.123 91.9341 11.4605 91.9341 11.8599C91.9341 12.2594 91.99 12.5969 92.1019 12.8725C92.2157 13.1481 92.3785 13.3568 92.5901 13.4986C92.8018 13.6404 93.0545 13.7113 93.3481 13.7113C93.6436 13.7113 93.8963 13.6404 94.106 13.4986C94.3176 13.3568 94.4794 13.1481 94.5913 12.8725C94.7051 12.5969 94.762 12.2594 94.762 11.8599Z"
                          fill="white"
                        ></path>
                        <path
                          d="M102.534 8.79237V14.9275H101.276L98.8341 11.3866H98.7951V14.9275H97.3123V8.79237H98.5884L101.003 12.3273H101.054V8.79237H102.534Z"
                          fill="white"
                        ></path>
                        <path
                          d="M61.6216 18.4504V17.2461H66.8071V18.4504H64.9468V23.3812H63.4849V18.4504H61.6216Z"
                          fill="white"
                        ></path>
                        <path
                          d="M69.1829 17.2461V23.3812H67.7V17.2461H69.1829Z"
                          fill="white"
                        ></path>
                        <path
                          d="M70.2825 17.2461H72.1188L73.6766 21.0446H73.7485L75.3062 17.2461H77.1426V23.3812H75.6986V19.6127H75.6477L74.1738 23.3423H73.2512L71.7773 19.5917H71.7264V23.3812H70.2825V17.2461Z"
                          fill="white"
                        ></path>
                        <path
                          d="M78.2362 23.3812V17.2461H82.514V18.4504H79.719V19.7085H82.2953V20.9158H79.719V22.177H82.514V23.3812H78.2362Z"
                          fill="white"
                        ></path>
                      </g>
                      <defs>
                        <clipPath id="clip0_5059_112">
                          <rect
                            fill="white"
                            height="29"
                            transform="translate(0.313477 0.310547)"
                            width="63"
                          ></rect>
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                </a>
              </div>
              {isScrolled && (
                <div className="opacity-100 translate-y-0">
                  <div className="hidden flex-1 justify-center md:flex">
                    <form className="relative">
                      <span className="absolute inset-y-0 left-3.5 flex items-center">
                        <svg
                          className="h-5 w-5 flex-shrink-0"
                          fill="none"
                          height="24"
                          viewBox="0 0 24 24"
                          width="24"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M21 21L17.364 17.364M17.364 17.364C18.9926 15.7353 20 13.4853 20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.4853 20 15.7353 18.9926 17.364 17.364Z"
                            stroke="#2F384C"
                            strokeLinecap="round"
                            strokeWidth="1.5"
                          ></path>
                        </svg>
                      </span>
                      <input
                        className="w-[23rem] max-w-full rounded-2xl border border-gray-200 bg-gray-50 px-4 py-2.5 pl-10 font-medium transition-all placeholder:text-gray-600 focus:bg-white focus:outline-none"
                        placeholder="Where to?"
                        type="text"
                      />
                    </form>
                  </div>
                </div>
              )}

              <div className="flex flex-1 items-center justify-end gap-4 text-white">
                <div className="flex items-center justify-end justify-items-center space-x-4">
                  <div
                    className="relative inline-block"
                    data-headlessui-state=""
                  >
                    <div>
                      <button
                        aria-label="User settings menu"
                        className="text-primarybg flex h-10 w-10 items-center justify-center rounded-xl bg-white"
                        title="User settings menu"
                        id="headlessui-menu-button-:r1f:"
                        type="button"
                        aria-haspopup="menu"
                        aria-expanded="false"
                        data-headlessui-state=""
                      >
                        <svg
                          fill="none"
                          height="24"
                          viewBox="0 0 24 24"
                          width="24"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g opacity="0.12">
                            <path
                              d="M4 18.8C4 16.149 6.14903 14 8.8 14H15.2C17.851 14 20 16.149 20 18.8C20 20.5673 18.5673 22 16.8 22H7.2C5.43269 22 4 20.5673 4 18.8Z"
                              fill="currentColor"
                            ></path>
                            <path
                              d="M16 6C16 8.20914 14.2091 10 12 10C9.79086 10 8 8.20914 8 6C8 3.79086 9.79086 2 12 2C14.2091 2 16 3.79086 16 6Z"
                              fill="currentColor"
                            ></path>
                          </g>
                          <path
                            d="M4 18.8C4 16.149 6.14903 14 8.8 14H15.2C17.851 14 20 16.149 20 18.8V18.8C20 20.5673 18.5673 22 16.8 22H7.2C5.43269 22 4 20.5673 4 18.8V18.8Z"
                            stroke="currentColor"
                            strokeLinecap="round"
                            strokeLinejoin="round"
                            strokeWidth="1.5"
                          ></path>
                          <path
                            d="M16 6C16 8.20914 14.2091 10 12 10C9.79086 10 8 8.20914 8 6C8 3.79086 9.79086 2 12 2C14.2091 2 16 3.79086 16 6Z"
                            stroke="currentColor"
                            strokeLinecap="round"
                            strokeLinejoin="round"
                            strokeWidth="1.5"
                          ></path>
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  );
}
